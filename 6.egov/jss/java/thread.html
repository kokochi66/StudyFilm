<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>line_jss</title>
    <link rel="stylesheet" href="../jss.css">
</head>
<body>

<div id="title">면접 > 자바</div>
<div id="wrap">
    <div class="sp">
        <div class="sp-box">쓰레드란?</div>
        <div class="an-box">
            자바 쓰레드는 프로세스에서의 하나의 실행의 흐름이다.<br>
            멀티 스레드를 사용하면 대기시간이 발생했을 때, 기다리는 동안 다른 일을 처리할 수 있어서 처리속도가 올라가게 된다.<br>
            쓰레드는 Runnable 인터페이스를 상속하여 만들어진다.<br><br>

            쓰레드 풀이란, 지정한 쓰레드 제한을 넘어서는 쓰레드가 생성된 경우이다. 이 경우에는 앞에있는 쓰레드가 먼저 실행되고, 끝나면 다음 Runnble 객체가 들어간다. 최종적으로 실행되는 shoutdown() 메서드는 작업 큐에서 대기중인 작업들을 모두 처리한 후 쓰레디 풀을 중지시킨다.<br><br>

            쓰레드 세이프는, 여러 쓰레드가 특정한 함수나 메소드에 동시에 접근해도 안전한 영역을 의미한다.<br>
            쓰레드 세이프하지 않은 객체가 멀티스레드 메소드 안에 들어가있다면, 여러 쓰레드에서 동일한 객체를 참조하여 오류를 발생시킬 수 있다.<br>
        </div>
    </div>
    <div class="sp">
        <div class="sp-box">쓰레드 장단점</div>
        <div class="an-box">
            멀티 스레드를 사용할 시에, 멀티 프로세싱 (프로세스를 여러번 돌리는 것) 보다도<br>
            Context Switching이 일어나지 않으며,  자원을 공유하고, 통신 비용이 적다는 장점이 있다.<br>
            즉, CPU 사용률을 높이고, 자원 사용성이 높아진다.<br>
            하지만 한 프로세스 내에서 자원을 공유하기 때문에 동기화와 데드락에 신경써야한다.<br>

        </div>
    </div>
    <div class="sp">
        <div class="sp-box">자바의 쓰레드 교착상태란?(데드락) 그리고 해결방법은?</div>
        <div class="an-box">
            멀티 쓰레드 프로그래밍에서는 동일한 자원을 여러곳에서 사용하는것을 락을 사용하여 금지시킵니다.<br>
            이 락을 사용하면 해당 자원에 접근했을 때, 자원이 사용중이라면 자원 사용이 끝날 때 까지 기다리도록 합니다.<br>
            그런데 만약 두개의 쓰레드에서 서로 갖고있는 락이 해제되기를 무한정 기다리는 상태가 생길 수 있습니다. 이를 쓰레드 교착상태, 데드락이라고 합니다.<br>
            데드락이 발생하는 조건은 총 4가지 입니다.<br>
            상호배제(Mutual Exclusion) : 한 자원에 대해 여러 쓰레드에서 접근이 불가능한 경우<br>
            점유와 대기(Hold and Wait) : 자원을 갖고있는 상태에서 다른 쓰레드가 사용하는 자원 반납을 기다리고 있을 때<br>
            비선점(Non Preemptive) : 다른 쓰레드의 자원을 실행 중간에 가져올 수 없을 때<br>
            환형대기(Circle wait) ; 각 쓰레드가 순환적으로 다음 다음 쓰레드가 요구하는 자원을 갖고있을 때<br>
            이 4가지 중 하나라도 충족하지 않으면 데드락이 발생하지 않으며, 조건을 충족하게 하지 않는 것이 데드락을 방지하는 방법입니다.<br>
        </div>
    </div>
    <div class="sp">
        <div class="sp-box">쓰레드 로컬변수</div>
        <div class="an-box">
            쓰레드 로컬 클래스는 오직 한 쓰레드에서만 사용될 수 있는 변수다.<br>
            멀티 쓰레드 환경에서 각 스레드마다 독립적인 변수를 접근할 수 있다.<br>
            * 여러 쓰레드에서 동시에 접근해서는 안되는 데이터를 안전하게 보관할때 사용<br>
            하지만 쓰레드 풀 환경에서, 데이터 사용이 끝나면 해당 데이터를 삭제해주어야 한다. 그렇지 않으면 메모리 누수의 주범이 되며, 재사용되는 쓰레드가 잘못된 데이터를 참조할 수 있다.<br>

        </div>
    </div>
    <div class="sp">
        <div class="sp-box">쓰레드 풀</div>
        <div class="an-box">
            쓰레드는 메모리 영역에서 생성되고 관리되는데, 사용자의 요청시마다 일일이 생성하고, 수거하면 그 비용을 무시하기 힘들다.<br>
            이를 위해, 자바에서는 쓰레드 풀을 미리 생성할 수 있도록 ExecutorService 인터페이스와 Executor 클래스를 제공하며, 구현객체를 만들어 사용할 수 있으며, 이를 쓰레드 풀이라고 부른다.<br>
            이런 쓰레드 풀을 사용하면, 매번 발생되는 쓰레드 생성/수거의 부담이 줄어들며, 빠르게 처리할 수 있게 된다.<br>
            그러나 너무 쓰레드를 많이 만들어 놓을 경우, 메모리 낭비만 발생하며, 특정 쓰레드에만 많은 작업이 부여되는 경우에는 다른 쓰레드는 놀게되는 현상이 발생한다.<br>
            이를 방지하기 위해 forkJoinPool이라는 방법을 사용할 수 있다.<br>
        </div>
    </div>
    <div class="sp">
        <div class="sp-box">ForkJoinPool</div>
        <div class="an-box">
            각 쓰레드가 하는 일을 세부적으로 분할하여, 모든 쓰레드가 골고루 일을 가져가도록 하는 방법<br>
            Fork를 통해서 업무를 분담하며, Join을 통해서 업무를 취합하는 형태이다.<br>
        </div>
    </div>
    <div class="sp">
        <div class="sp-box">쓰레드 세이프</div>
        <div class="an-box">
            멀티 스레드에서 특정한 객체를 공유해서 작업을 할 때, 여러 쓰레드에서 동시에 접근되어서는 안되는 영역을 임계영역이라고 한다.<br>
            이를 위해서 세마포어, 상호배제등의 개념이 있다.<br>
            + 세마포어 : 공유된 자원의 데이터를 여러 프로세스에서 접근하는 것을 막는 것<br>
            + 상호배제(Mutex) ; 공유된 데이터를 여러 쓰레드가 접근하는 것을 막는 것<br>
            자바의 동기화 메소드와 동기화 블록을 사용하여 쓰레드 세이프한 환경을 만들 수 있다.<br>
            하지만 동기화를 남용하면, 프로그램 성능이 현저히 떨어지게 된다.<br>
        </div>
    </div>
    <div class="sp">
        <div class="sp-box">동기화 가시성 문제</div>
        <div class="an-box">
            스레드가 변경한 값이 메모리에 저장되지 않아, 참조가 불가능한 상황이다.<br>
            volatile나 lock을 이용하여 해결할 수 있다.<br>
            + volatile : 자바 변수를 메모리에서 바로 읽어 조작하고, 반영하겠다고 명시하는 키워드이다.<br>
            volatile로는 여러 쓰레드에서 데이터에 접근할때, 한쪽에서 읽고 쓰기 작업이 동시에 진행한다면 잘못된 결과가 나타난다.<br>
            그러므로 쓰기동작과 읽기동작이 구분된 상황일때에 적합하다.<br>

        </div>
    </div>
    <div class="sp">
        <div class="sp-box">자바 고유 락(IntrinsicLock)</div>
        <div class="an-box">
            자바의 모든 객체는 고유락을 갖고있다.<br>
            이를 synchronized를 통해서 변수로 접근하는 스레드를 제어할 수 있다.<br>
            synchronized를 이용한 동기화를 구조적인 락이라고 한다. 이는 동기화 블록 내에서 진행되며, 블록의 구조에 맞게 설계되어야한다.<br><br>

            ReetrantLock() 객체를 선언하여 사용하는 락을 명시적인 락이라고 한다.<br>
            복잡한 상황에서 락을 사용해야할 경우에 사용하며, 예외가 발생하더라도 락이 해제될 수 있도록 try catch, finally 문을 사용하여 락을 반드시 해제해주어야 한다.<br>
        </div>
    </div>
    <div class="np">
        <div class="back-box" onclick="lc('./java_list.html')">돌아가기</div>
    </div>
</div>
<script src="../jss.js"></script>
</body>
</html>